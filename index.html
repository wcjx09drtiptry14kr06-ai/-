<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ¶ˆè²»æœŸé™ç®¡ç†ï¼‹ãƒ¬ã‚·ãƒ”ææ¡ˆã‚¢ãƒ—ãƒª</title>

<style>
body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    padding: 20px;
}

h1 {
    text-align: center;
}

.container {
    max-width: 700px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

input, button {
    padding: 8px;
    margin: 5px 0;
}

button {
    cursor: pointer;
}

ul {
    list-style: none;
    padding: 0;
}

li {
    padding: 10px;
    margin: 5px 0;
    border-radius: 5px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.expired { background-color: #ffcccc; }
.warning { background-color: #fff3cd; }
.safe { background-color: #d4edda; }

#recipeArea {
    margin-top: 20px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
}
</style>
</head>

<body>

<div class="container">
    <h1>ğŸ æ¶ˆè²»æœŸé™ç®¡ç†ï¼‹ãƒ¬ã‚·ãƒ”ææ¡ˆ</h1>

    <input type="text" id="itemName" placeholder="é£Ÿæå">
    <input type="date" id="expiryDate">
    <button onclick="addItem()">è¿½åŠ </button>
    <button onclick="saveItems()">ä¿å­˜</button>
    <button onclick="clearItems()">å…¨å‰Šé™¤</button>

    <ul id="itemList"></ul>

    <hr>

    <button onclick="generateRecipe()">ğŸ³ ãƒ¬ã‚·ãƒ”ã‚’è€ƒãˆã‚‹</button>

    <div id="recipeArea">
        <h3>ãŠã™ã™ã‚ãƒ¬ã‚·ãƒ”</h3>
        <p id="recipeText">ã“ã“ã«ãƒ¬ã‚·ãƒ”ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
    </div>

</div>

<script>
let items = JSON.parse(localStorage.getItem("foodItems")) || [];

function renderItems() {
    const list = document.getElementById("itemList");
    list.innerHTML = "";

    const today = new Date();

    items.forEach((item, index) => {
        const li = document.createElement("li");
        const expiry = new Date(item.date);
        const diffDays = Math.ceil((expiry - today) / (1000 * 60 * 60 * 24));

        if (diffDays < 0) {
            li.classList.add("expired");
        } else if (diffDays <= 3) {
            li.classList.add("warning");
        } else {
            li.classList.add("safe");
        }

        li.innerHTML = `
            <span>${item.name} - ${item.date} (ã‚ã¨ ${diffDays} æ—¥)</span>
            <button onclick="deleteItem(${index})">å‰Šé™¤</button>
        `;

        list.appendChild(li);
    });
}

function addItem() {
    const name = document.getElementById("itemName").value;
    const date = document.getElementById("expiryDate").value;

    if (!name || !date) {
        alert("é£Ÿæåã¨æ—¥ä»˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
        return;
    }

    items.push({ name, date });
    renderItems();

    document.getElementById("itemName").value = "";
    document.getElementById("expiryDate").value = "";
}

function deleteItem(index) {
    items.splice(index, 1);
    renderItems();
    saveItems();
}

function saveItems() {
    localStorage.setItem("foodItems", JSON.stringify(items));
    alert("ä¿å­˜ã—ã¾ã—ãŸï¼");
}

function clearItems() {
    if (confirm("æœ¬å½“ã«å…¨ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) {
        items = [];
        localStorage.removeItem("foodItems");
        renderItems();
    }
}

function generateRecipe() {
    if (items.length === 0) {
        document.getElementById("recipeText").innerText = "é£ŸæãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚";
        return;
    }

    const ingredientList = items.map(item => item.name);

    const recipeTemplates = [
        `${ingredientList.join("ã€")}ã‚’ä½¿ã£ãŸç‚’ã‚ç‰©ã€‚å¡©ã‚³ã‚·ãƒ§ã‚¦ã§ã‚·ãƒ³ãƒ—ãƒ«ã«å‘³ä»˜ã‘ã—ã€æœ€å¾Œã«ã”ã¾æ²¹ã‚’å°‘ã—åŠ ãˆã‚‹ã¨é¢¨å‘³ã‚¢ãƒƒãƒ—ã€‚`,
        `${ingredientList.join("ã€")}ã‚’ä½¿ã£ãŸã‚¹ãƒ¼ãƒ—ã€‚ã‚³ãƒ³ã‚½ãƒ¡ã§ç…®è¾¼ã¿ã€æœ€å¾Œã«åµã‚’åŠ ãˆã‚‹ã¨å„ªã—ã„å‘³ã‚ã„ã«ãªã‚Šã¾ã™ã€‚`,
        `${ingredientList.join("ã€")}ã®ã‚ªãƒ ãƒ¬ãƒ„ã€‚å…·æã‚’ç´°ã‹ãåˆ‡ã£ã¦åµã¨æ··ãœã¦ç„¼ãã ã‘ã®ç°¡å˜ãƒ¬ã‚·ãƒ”ã€‚`,
        `${ingredientList.join("ã€")}ã‚’ä½¿ã£ãŸãƒãƒ£ãƒ¼ãƒãƒ³ã€‚ã”é£¯ã¨ä¸€ç·’ã«ç‚’ã‚ã¦é†¤æ²¹ã§å‘³ä»˜ã‘ã€‚`,
        `${ingredientList.join("ã€")}ã®å’Œé¢¨ãƒ‘ã‚¹ã‚¿ã€‚ãƒã‚¿ãƒ¼ã¨é†¤æ²¹ã§ç‚’ã‚ã¦å®Œæˆã€‚`
    ];

    const randomRecipe = recipeTemplates[Math.floor(Math.random() * recipeTemplates.length)];

    document.getElementById("recipeText").innerText = randomRecipe;
}

renderItems();
</script>

</body>
</html>
